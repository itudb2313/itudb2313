{% extends "layout.html" %}
{% block title %}Rise{% endblock %}
{% block content %}

    <h1>Rises</h1>
    <!-- <h2>Insert a Rise</h2>
    <a href="{{ url_for('rises_bp.insert_rise') }}">Click to insert</a> -->
    
    <h2>Delete a Rise Record</h2>
    <form id="deleteRise" action="/delete_rise" method="post">  

        <label for="rise_id">Rise ID:</label>
        <input type="text" id="rise_id" name="rise_id" required><br>

        <input type="submit" class="delete-button" value="Delete">
    </form>

          <!-- Trigger/Open The Modal -->
<button id="myBtn" class="edit-button">Insert</button>
    
    <table class="table">
        <thead>
          <tr>
            <th scope="col">Rise ID</th>
            <th scope="col">Amount (%)</th>
            <th scope="col">Date</th>
            <th scope="col">State</th>
            <th scope="col">Edit</th>
            <th scope="col">Delete</th>
          </tr>
        </thead>
        <tbody>
            {% for rise in rises %}
          <tr>
            <th scope="row">{{rise.rise_id}}</th>
            <td>{{rise.amount_by_percent}}</td>
            <td>{{rise.rise_date}}</td>
            <td>{{rise.rise_state}}</td>
            <td><a class="edit-button" href="?rise_id={{rise.rise_id}}">Edit</a></td>
            <td><a class="delete-button" href="?rise_id={{rise.rise_id}}">Delete</a></td>
          </tr>
          {% endfor %}
          
        </tbody>
      </table>

      <div class="pagination">
        {% if page > 1 %}
            <a class="previous-button" href="?page={{ page - 1 }}" >&laquo; Previous</a>
        {% endif %}

        <span>Page {{ page }}</span>

        {% if rises|length == 10 %}
            <a class="next-button" href="?page={{ page + 1 }}" >Next &raquo;</a>
        {% endif %}
      </div>



<!-- The Modal -->
<div id="myModal" class="modal">

 <!-- Modal content -->
 <div class="modal-content">
    <span class="close">&times;</span>
    <div class="insert-container">
        <!-- Insert data form -->
        <form id="raiseForm" action="/insert_rise" method="post">
          <label for="rise_id">Raise ID:</label>
          <input type="text" id="rise_id" name="rise_id" required><br>
  
          <label for="amount_by_percent">Amount by Percent:</label>
          <input type="text" id="amount_by_percent" name="amount_by_percent" required><br>
  
          <label for="rise_date">Raise Date:</label>
          <input type="date" id="rise_date" name="rise_date" required><br>
  
          <label for="rise_state">Raise State:</label>
          <select id="rise_state" name="rise_state" required>
              <option value="Suspended">Suspended</option>
              <option value="Confirmed">Confirmed</option>
          </select><br>
  
          <input type="submit" value="Submit">
      </form>


    </div>
 </div>

</div>

<script>
// Get the modal
var modal = document.getElementById("myModal");

// Get the button that opens the modal
var btn = document.getElementById("myBtn");

// Get the <span> element that closes the modal
var span = document.getElementsByClassName("close")[0];

// When the user clicks the button, open the modal 
btn.onclick = function() {
 modal.style.display = "flex";
}

// When the user clicks on <span> (x), close the modal
span.onclick = function() {
 modal.style.display = "none";
}

// When the user clicks anywhere outside of the modal, close it
window.onclick = function(event) {
 if (event.target == modal) {
    modal.style.display = "none";
 }
}
</script>

{% endblock %}
